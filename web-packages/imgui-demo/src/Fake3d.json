{
  "playerVersion": { "web": "2.2.5", "native": "0.0.1.202311221223" },
  "images": [
    { "url": "https://mdn.alipayobjects.com/mars/afts/img/A*OzhLSqbiQzcAAAAAAAAAAAAAelB4AQ/original", "id": "0bfc1a8f87854a5dbbd1da883f258a80" },
    { "url": "https://mdn.alipayobjects.com/mars/afts/img/A*6t4oToXSR9EAAAAAAAAAAAAAelB4AQ/original", "id": "0d619457999e4a1fb658548133988471" }
  ],
  "fonts": [],
  "version": "3.1",
  "shapes": [],
  "plugins": [],
  "type": "ge",
  "compositions": [
    {
      "id": "1",
      "name": "新建合成1",
      "duration": 5,
      "startTime": 0,
      "endBehavior": 4,
      "previewSize": [750, 1624],
      "items": [{ "id": "de210a9dd2dc478a9af188fd99de7548" }],
      "camera": { "fov": 60, "far": 40, "near": 0.1, "clipMode": 1, "position": [0, 0, 8], "rotation": [0, 0, 0] },
      "sceneBindings": [{ "key": { "id": "c55eabb5934a4f99994d400cdb2f9539" }, "value": { "id": "de210a9dd2dc478a9af188fd99de7548" } }],
      "timelineAsset": { "id": "b1e4434b3ed4480cab6c04d3de29e4a6" }
    }
  ],
  "components": [
    {
      "id": "0491350a2f884a2796f6bea2f67ac889",
      "item": { "id": "de210a9dd2dc478a9af188fd99de7548" },
      "dataType": "EffectComponent",
      "geometry": { "id": "4b7944c565fa44358515181345fcbc04" },
      "materials": [{ "id": "f1f915c2e48041c99658820fc3a14b3d" }]
    },
    {
      "id": "ba8dfd10f7aa4f55941f0a908bdf2c7b",
      "item": { "id": "de210a9dd2dc478a9af188fd99de7548" },
      "dataType": "Fake3DComponent",
      "motionType": "Perspective",
      "loop": true,
      "amountOfMotion": 0.4,
      "animationLength": 5,
      "mode": 0,
      "amplitudeX": 0.1,
      "amplitudeY": 0.05,
      "amplitudeZ": 0.4,
      "phaseX": 0,
      "phaseY": 0.25,
      "phaseZ": 0.25,
      "startPositionX": 0,
      "startPositionY": 0,
      "startPositionZ": 0,
      "endPositionX": 0,
      "endPositionY": 0,
      "endPositionZ": 0
    }
  ],
  "geometries": [],
  "materials": [
    {
      "dataType": "Material",
      "shader": { "id": "9c38811e6da44aee40b6d464cf428c4d" },
      "stringTags": { "RenderType": "Transparent", "RenderFace": "Both" },
      "floats": { "_Enlarge": 2.02, "_Focus": 1, "ZWrite": 1, "DepthMapRadius": 0.54 },
      "textures": {
        "_MainTex": { "texture": { "id": "b49efd8a624842ca8ba127a6beb0a043" } },
        "_DepthTex": { "texture": { "id": "c3079500ad4e4c9abb3604c6da08d635" } }
      },
      "colors": {},
      "vector4s": {},
      "ints": {},
      "macros": [],
      "id": "f1f915c2e48041c99658820fc3a14b3d"
    }
  ],
  "items": [
    {
      "id": "de210a9dd2dc478a9af188fd99de7548",
      "name": "fake3d",
      "duration": 5,
      "type": "effect",
      "visible": true,
      "endBehavior": 0,
      "delay": 0,
      "renderLevel": "B+",
      "components": [{ "id": "0491350a2f884a2796f6bea2f67ac889" }, { "id": "ba8dfd10f7aa4f55941f0a908bdf2c7b" }],
      "transform": { "position": { "x": 0, "y": 0, "z": 0 }, "eulerHint": { "x": 0, "y": 0, "z": 0 }, "scale": { "x": 5.8872, "y": 5.3286, "z": 1 } },
      "dataType": "VFXItemData"
    }
  ],
  "shaders": [
    {
      "id": "9c38811e6da44aee40b6d464cf428c4d",
      "name": "fake-3d",
      "dataType": "Shader",
      "vertex": "precision highp float;\r\n\r\nattribute vec3 aPos;\r\nattribute vec2 aUV;\r\n\r\nvarying vec2 uv;\r\n\r\nuniform mat4 effects_ObjectToWorld;\r\nuniform mat4 effects_MatrixVP;\r\n\r\nvoid main() {\r\n    uv = aUV;\r\n    gl_Position = effects_MatrixVP * effects_ObjectToWorld * vec4(aPos, 1.0);\r\n}",
      "fragment": "precision highp float;\r\n\r\n#define PI 3.14159265359\r\n\r\nvarying vec2 uv;\r\n\r\nuniform sampler2D _MainTex;\r\nuniform sampler2D _DepthTex;\r\nuniform float _Focus;\r\nuniform float _Enlarge;\r\n\r\nuniform float _PosX;\r\nuniform float _PosY;\r\nuniform float _PosZ;\r\n\r\nvec4 perspective(\r\n    vec2 uv,\r\n    vec3 cameraShift,\r\n    float convergence\r\n) {\r\n    vec3 ray_origin = vec3(uv - 0.5, 0) * (1.0 - convergence * cameraShift.z);\r\n    vec3 ray_direction = vec3(0, 0, 1);\r\n    ray_origin.xy -= cameraShift.xy * convergence;\r\n    ray_direction.xy += (uv - 0.5) * cameraShift.z + cameraShift.xy;\r\n    const int step_count = 45;\r\n    const float hit_threshold = 0.01;\r\n    ray_direction /= float(step_count);\r\n    vec4 color = vec4(0.0);\r\n    for(int i = 0; i < step_count; i++) {\r\n        ray_origin += ray_direction;\r\n        float scene_z = 1.0 - texture2D(_DepthTex, ray_origin.xy + 0.5).x;\r\n        if(ray_origin.z > scene_z) {\r\n            if(ray_origin.z - scene_z < hit_threshold) {\r\n                break;\r\n            }\r\n            ray_origin -= ray_direction;\r\n            ray_direction /= 2.0;\r\n        }\r\n\r\n    }\r\n    color = texture2D(_MainTex, ray_origin.xy + 0.5);\r\n\r\n    return color;\r\n}\r\nvoid main(void) {\r\n    float moveX = _PosX;\r\n    float moveY = _PosY;\r\n    float moveZ = _PosZ;\r\n\r\n    vec3 offset = vec3(moveX, moveY, moveZ);\r\n    vec2 uv = (uv - vec2(0.5)) /\r\n        vec2(1.0 + _Enlarge * 0.125) +\r\n        vec2(0.5);\r\n\r\n    vec4 color = perspective(uv, vec3(offset.x, offset.y, offset.z), _Focus);\r\n    color.rgb *= color.a;\r\n    gl_FragColor = color;\r\n}",
      "properties": "_MainTex(\"主贴图\", 2D) = \"white\" {}\n_DepthTex(\"深度贴图\", 2D) = \"white\" {}\n_Enlarge(\"Enlarge\", Float) = 1.06\n_Focus(\"Focus\", Float) = 0.5\n"
    }
  ],
  "bins": [{ "url": "https://mdn.alipayobjects.com/mars/afts/file/A*EqGaSptjpjYAAAAAAAAAAAAAelB4AQ", "id": "584a96b543424c7fb8b57c14b14391fc" }],
  "textures": [
    {
      "id": "b49efd8a624842ca8ba127a6beb0a043",
      "dataType": "Texture",
      "source": { "id": "0bfc1a8f87854a5dbbd1da883f258a80" },
      "name": "Image_HDR.tex",
      "flipY": true,
      "wrapS": 10497,
      "wrapT": 10497,
      "magFilter": 9729,
      "minFilter": 9729
    },
    {
      "id": "c3079500ad4e4c9abb3604c6da08d635",
      "dataType": "Texture",
      "source": { "id": "0d619457999e4a1fb658548133988471" },
      "name": "深度图-0.54-b49efd8a624842ca8ba127a6beb0a043.tex",
      "flipY": true,
      "wrapS": 10497,
      "wrapT": 10497,
      "magFilter": 9729,
      "minFilter": 9729
    }
  ],
  "animations": [],
  "miscs": [
    { "id": "b1e4434b3ed4480cab6c04d3de29e4a6", "dataType": "TimelineAsset", "tracks": [{ "id": "c55eabb5934a4f99994d400cdb2f9539" }] },
    { "id": "07e42568c971418a856902f92616bd12", "dataType": "ActivationPlayableAsset" },
    { "id": "096209dd68284ee1b3da3de1df60edc1", "dataType": "TransformPlayableAsset", "positionOverLifetime": {} },
    {
      "id": "9409f2a4b5e74b67bbcd7616e9ca2d82",
      "dataType": "ActivationTrack",
      "children": [],
      "clips": [{ "start": 0, "duration": 5, "endBehavior": 0, "asset": { "id": "07e42568c971418a856902f92616bd12" } }]
    },
    {
      "id": "ae82a8c0ab19437e95874b435ecc27fb",
      "dataType": "TransformTrack",
      "children": [],
      "clips": [{ "start": 0, "duration": 5, "endBehavior": 0, "asset": { "id": "096209dd68284ee1b3da3de1df60edc1" } }]
    },
    {
      "id": "c55eabb5934a4f99994d400cdb2f9539",
      "dataType": "ObjectBindingTrack",
      "children": [{ "id": "9409f2a4b5e74b67bbcd7616e9ca2d82" }, { "id": "ae82a8c0ab19437e95874b435ecc27fb" }],
      "clips": []
    }
  ],
  "compositionId": "1"
}
